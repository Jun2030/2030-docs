#  1. Docker简介

## Docker产生背景
- **环境（切换/配置）问题**
  开发和运维、测试因为环境不同而导致的问题（操作系统不同、软件环境不同、应用配置的不同等）。比如开发一个产品的途中，时常会出现的问题就是：“在我的电脑上可以运行，而到了另外一个开发人员的电脑上就不能使用的问题”，或者是因为版本更新导致服务不可用等等，这对于运维人员来说，压力十分大，而环境配置是一个非常头疼的问题，每一个机器都需要部署环境十分麻烦且费时费力，并且配置的环境不能跨平台，非常不方便
- **应用之间的冲突问题**
  假如我们将开发的两个应用部署到同一个服务器上，如果一个应用出了问题，导致CPU出问题上升到了100%，那么第二个应用也会受到关联；并且如果两个应用分别使用不同的语言或者技术栈，当安装在同一个服务器上的时候可能就会造成各种冲突/无法兼容，到时候调试就非常头疼。


:icon{name="noto:backhand-index-pointing-down"} Docker的出现可以解决上面的两个问题
- **关于环境问题的解决方案**
  Docker可以让开发者打包他们的应用以及依赖包到一个轻量级、可移植的容器中，然后发布到任何流行的 Linux机器上，也可以实现虚拟化。将环境构建打包成一个镜像发布到网上，想要用这个环境的时候就直接拉取一份就OK了。
- **解决应用之间的隔离问题**
  Docker核心思想就是使用容器化技术，打包装箱，每个箱子是互相隔离的。容器是完全使用沙箱机制，相互之间不会有任何接口（类似微信中的小程序），更重要的是容器性能开销极低。


## Docker是什么
Docker是一个用于开发、发布和运行应用的开放平台，也可以说是一个应用打包、分发、部署的工具。你也可以把它理解为一个轻量的虚拟机，它只虚拟你软件需要的运行环境，多余的一点都不要，而普通虚拟机则是一个完整而庞大的系统，包含各种不管你要不要的软件。
**打包：**就是把你软件运行所需的依赖、第三方库、软件打包到一起，变成一个安装包
**分发：**你可以把你打包好的“安装包”上传到一个镜像仓库，其他人可以非常方便的获取和安装
**部署：**拿着“安装包”就可以一个命令运行起来你的应用，自动模拟出一摸一样的运行环境，不管是在 Windows/Mac/Linux


## 虚拟机和Docker容器的区别
| 特性   | 普通虚拟机                                                   | Docker                                               |
| ------ | ------------------------------------------------------------ | ---------------------------------------------------- |
| 跨平台 | 通常只能在桌面级系统运行，例如 Windows/Mac，无法在不带图形界面的服务器上运行 | 支持的系统非常多，各类 windows 和 Linux 都支持       |
| 性能   | 性能损耗大，内存占用高，因为是把整个完整系统都虚拟出来了     | 性能好，只虚拟软件所需运行环境，最大化减少没用的配置 |
| 自动化 | 需要手动安装所有东西                                         | 一个命令就可以自动部署好所需环境                     |
| 稳定性 | 稳定性不高，不同系统差异大                                   | 稳定性好，不同系统都一样部署方式                     |


## Docker部署的优势
常规应用开发部署方式：自己在Windows/Mac端上开发、测试 --> 到 Linux 服务器配置运行环境部署。
> 问题：我机器上跑都没问题，怎么到服务器就各种问题了

用Docker开发部署流程：自己在Windows/Mac端上开发、测试 --> 打包为Docker镜像（可以理解为软件安装包） --> 各种服务器上只需要一个命令部署好
> 优点：确保了不同机器上跑都是一致的运行环境，不会出现我机器上跑正常，你机器跑就有问题的情况。

## Docker的应用场景
- **Web应用的自动化打包和发布**
- 自动化测试和持续集成、发布
- 在服务型环境中部署和调整数据库或其他的后台应用
